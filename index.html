<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Mention.js Test</title>

	<link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="../recommended-styles.css">
	
	<style type='text/css'>
		body {
			padding:20px;
			background: #EEE;
			color: #252525;
			text-shadow: 0 1px 0 white;
			}

		ul {
			text-shadow:none;
			}
		textarea {
			padding: 8px 15px;
			background: #fefefe;
			-moz-border-radius: 2px;
			-webkit-border-radius: 2px;
			-o-border-radius: 2px;
			-ms-border-radius: 2px;
			-khtml-border-radius: 2px;
			border-radius: 2px;
			border: 1px solid #999;
			-moz-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
			-webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
			-o-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
			box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
			overflow: auto;
			overflow-y: hidden;
			color:#444;
			width:100%;
			height:100px;
			-webkit-box-sizing: border-box;
			-moz-box-sizing: border-box;
			box-sizing: border-box;
			}
		h2{
			border-bottom: 1px solid #CCC;
			margin-bottom: 5px;
			margin-top: 30px;
			}
	</style>
</head>
<body>
	<p>Type in some text below as if you were sending a "tweet" or a "notice". Be sure to try to "mention" someone by typing the @ symbol or "hashtag" something by # symbol or target a "group" by ! symbol (in statusnet micro-blogging service), then some text</p>

	<hr />

	<h3>Example #1: Name, Username, &amp; Image</h3>
	<p>In this example, a full name, image, and username is shown in the resulting list. You can query by username OR full name (try typing @Jenna, #plugin or !humor)</p>
	<textarea id="full"></textarea>

	<h3>Example #2: Name, Username</h3>
	<p>In this example, a full name and username is shown in the resulting list.</p>
	<textarea id="med"></textarea>

	<h3>Example #3: Username</h3>
	<p>In this example, a full name and username is shown in the resulting list. You can <b>only</b> query by typing the username</p>
	<textarea id="light"></textarea>
	
	<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
	<script type='text/javascript' src="http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js"></script>
	<script type='text/javascript'>(function(e){e.fn.extend({mention:function(t){this.opts={users:[],delimiter:"@",sensitive:true,emptyQuery:false,key:"username",name:"name",image:"image",queryBy:[],typeaheadOpts:{}};var n=e.extend({},this.opts,t),r=function(){if(typeof e=="undefined"){throw new Error("jQuery is Required")}else{if(typeof e.fn.typeahead=="undefined"){throw new Error("Typeahead is Required")}}return true},i=function(e,t){var r;for(r=t;r>=0;r--){if(e[r]==n.delimiter){break}}return e.substring(r,t)},s=function(e){var t;if(n.emptyQuery){var r=this.query.toLowerCase(),i=this.$element[0].selectionStart,s=r.slice(i-1,i),o=e["delimiter"]?e["delimiter"]:n.delimiter;if(s==o){if(!r.match(new RegExp(o+e[n.key],"g")))return true}}if(!n.queryBy.length)n.queryBy=[n.key];for(t in n.queryBy){if(e[n.queryBy[t]]){var u=e[n.queryBy[t]].toLowerCase(),a=this.query.toLowerCase().match(new RegExp((e["delimiter"]?e["delimiter"]:n.delimiter)+"\\w+","g")),f;if(!!a){for(f=0;f<a.length;f++){var l=a[f].substring(1).toLowerCase(),c=new RegExp((e["delimiter"]?e["delimiter"]:n.delimiter)+u,"g"),h=this.query.toLowerCase().match(c);if(u.indexOf(l)!=-1&&h===null){return true}}}}}},o=function(e,t){var n=this.query,r=this.$element[0].selectionStart,i;for(i=r;i>=0;i--){if(n[i]==t){break}}var s=n.substring(i,r),o=n.substring(0,i),u=n.substring(r),n=o+t+e+u;this.tempQuery=n;return n},u=function(e){if(e.length&&n.sensitive){var t=i(this.query,this.$element[0].selectionStart).substring(1),r,s=e.length,o={highest:[],high:[],med:[],low:[]},u=[];if(t.length==1){for(r=0;r<s;r++){var a=e[r];if(a[n.key][0]==t){o.highest.push(a)}else if(a[n.key][0].toLowerCase()==t.toLowerCase()){o.high.push(a)}else if(a[n.key].indexOf(t)!=-1){o.med.push(a)}else{o.low.push(a)}}for(r in o){var f;for(f in o[r]){u.push(o[r][f])}}return u}}return e},a=function(t){var r=this;t=e(t).map(function(t,i){t=e(r.options.item).attr("data-value",i[n.key]);var s=e("<div />");if(i[n.image]){s.append('<img class="mention_image" src="'+i[n.image]+'">')}if(i[n.name]){s.append('<b class="mention_name">'+i[n.name]+"</b>")}if(i[n.key]){s.append('<span class="mention_username"> '+(i["delimiter"]?i["delimiter"]:n.delimiter)+i[n.key]+"</span>")}t.find("a").attr("data-delimiter",i["delimiter"]?i["delimiter"]:n.delimiter).html(r.highlighter(s.html()));return t[0]});t.first().addClass("active");this.$menu.html(t);return this};e.fn.typeahead.Constructor.prototype.render=a;e.fn.typeahead.Constructor.prototype.select=function(){var e=this.$menu.find(".active").attr("data-value"),t=this.$menu.find(".active").find("a").attr("data-delimiter");this.$element.val(this.updater(e,t)).change();return this.hide()};e.fn.typeahead.Constructor.prototype.updater=function(e,t){return e};return this.each(function(){var t=e(this);if(r()){t.typeahead(e.extend({source:n.users,matcher:s,updater:o,sorter:u},n.typeaheadOpts))}})}})})(jQuery)</script>
	<script type="text/javascript">
		$(document).ready(function(){
			
			$("#full").mention({
                key: 'username',
                name: 'name',
                image: 'image',
                delimiter: '@',
                emptyQuery: true,
                queryBy: ['name', 'username'],
				users: [{
					name: 'Lindsay Made',
					username: 'LindsayM',
					image: 'http://placekitten.com/25/25'
				}, {
					name: 'Rob Dyrdek',
					username: 'robdyrdek',
					image: 'http://placekitten.com/25/24'
				}, {
					name: 'Rick Bahner',
					username: 'RickyBahner',
					image: 'http://placekitten.com/25/23'
				}, {
					name: 'Jacob Kelley',
					username: 'jakiestfu',
					image: 'http://placekitten.com/25/22'
				}, {
					name: 'John Doe',
					username: 'HackMurphy',
					image: 'http://placekitten.com/25/21'
				}, {
					name: 'Charlie Edmiston',
					username: 'charlie',
					image: 'http://placekitten.com/25/20'
				}, {
					name: 'Andrea Montoya',
					username: 'andream',
					image: 'http://placekitten.com/24/20'
				}, {
					name: 'Jenna Talbert',
					username: 'calisunshine',
					image: 'http://placekitten.com/23/20'
				}, {
					name: 'Street League',
					username: 'streetleague',
					image: 'http://placekitten.com/22/20'
				}, {
					name: 'Loud Mouth Burrito',
					username: 'Loudmouthfoods',
					image: 'http://placekitten.com/21/20'
				}, {
                    name: 'jQuery Plugin',
					username: 'jqueryplugin',
					image: '',
                    delimiter: '#'
                }, {
                    name: 'Bootstrap Plugin',
					username: 'bootstrapplugin',
					image: '',
                    delimiter: '#'
                }, {
                    name: 'Translation',
					username: 'translation',
					image: 'http://quitter.se/avatar/1105-48-20130804110730.png',
                    delimiter: '!'
                },{
                    name: 'Humor',
					username: 'humor',
					image: 'http://quitter.se/avatar/1098-48-20130801101548.jpeg',
                    delimiter: '!'
                }]
			});


			$("#med").mention({
				key: 'username',
                name: 'name',
                image: 'image',
                delimiter: '@',
                emptyQuery: true,
                queryBy: ['name', 'username'],
				users: [{
					name: 'Lindsay Made',
					username: 'LindsayM',
				}, {
					name: 'Rob Dyrdek',
					username: 'robdyrdek',
				}, {
					name: 'Rick Bahner',
					username: 'RickyBahner',
				}, {
					name: 'Jacob Kelley',
					username: 'jakiestfu',
				}, {
					name: 'John Doe',
					username: 'HackMurphy',
				}, {
					name: 'Charlie Edmiston',
					username: 'charlie',
				}, {
					name: 'Andrea Montoya',
					username: 'andream',
				}, {
					name: 'Jenna Talbert',
					username: 'calisunshine',
				}, {
					name: 'Street League',
					username: 'streetleague',
				}, {
					name: 'Loud Mouth Burrito',
					username: 'Loudmouthfoods',
				}, {
                    name: 'jQuery Plugin',
					username: 'jqueryplugin',
                    delimiter: '#'
                }, {
                    name: 'Bootstrap Plugin',
					username: 'bootstrapplugin',
                    delimiter: '#'
                }, {
                    name: 'Translation',
					username: 'translation',
                    delimiter: '!'
                },{
                    name: 'Humor',
					username: 'humor',
                    delimiter: '!'
                }]
			});

			$("#light").mention({
				key: 'username',
                name: 'name',
                image: 'image',
                delimiter: '@',
                emptyQuery: true,
                queryBy: ['username'],
				users: [{
					username: 'LindsayM',
				}, {
					username: 'robdyrdek',
				}, {
					username: 'RickyBahner',
				}, {
					username: 'jakiestfu',
				}, {
					username: 'HackMurphy',
				}, {
					username: 'charlie',
				}, {
					username: 'andream',
				}, {
					username: 'calisunshine',
				}, {
					username: 'streetleague',
				}, {
					username: 'Loudmouthfoods',
				}, {
					username: 'jqueryplugin',
                    delimiter: '#'
                }, {
					username: 'bootstrapplugin',
                    delimiter: '#'
                }, {
					username: 'translation',
                    delimiter: '!'
                },{
					username: 'humor',
                    delimiter: '!'
                }]
			});
			
		});
	</script>
</body>
</html>
